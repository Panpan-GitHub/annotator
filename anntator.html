<!DOCTYPE html>
<html>

<head>
  <!-- Required meta tags-->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000">
  <!-- Your app title -->
  <title>悦批</title>
  <!-- Path to Framework7 Library CSS -->
  <link rel="stylesheet" href="css/framework7.css">
  <link rel="stylesheet" href="css/framework7-icons.css">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .ios .searchbar:after {
      background-color: white;
    }

    .ios .card {
      margin: 8px 0 0 0;
    }

    .ios .navbar .left {
      margin-right: 0px;
    }

    .ios .navbar b,
    .ios .navbar .title {
      font-weight: 500;
    }

    p {
      font-size: 16px;
      line-height: 1.5rem;
    }

    .ios .navbar .title {
      font-size: 16px;
    }

    .ios .media-list .item-title,
    .ios li.media-item .item-title {
      font-weight: 500;
    }
  </style>
</head>

<body>
  <!-- App root element -->
  <div id="app">
    <!-- 左侧边栏 -->
    <div class="panel panel-left panel-cover anpanel annotator">
      <div class="block" id="Mynote">
        <div id="ancontent">
          <div class="texbg">暂无批注</div>
        </div>
      </div>
    </div>
    <!-- 右侧侧边栏 -->
    <div class="panel panel-right panel-cover anpanel annotator" id="anpanel">
      <div class="block block-strong annotator">
        <p>批注来源：
          <label class="checkbox">
            <input type="checkbox" name="student" checked="checked">
            <i class="icon-checkbox"></i>
          </label> 学生
          <label class="checkbox">
            <input type="checkbox" name="teacher" checked="checked">
            <i class="icon-checkbox"></i>
          </label> 教师</p>
      </div>

      <div class="block" id="Mynote" style="margin-top: 0;padding-top: 0px;">
        <div id="ancontent2">

          <!-- <div class="card cardcss" id="teacher">
            <blockquote class="blockquote bqcolor2">
              <p>我们要感谢这个时代</p>
            </blockquote>
            <div class="card-content cardct">
              <p id="anPnode">大家好好品品马云爸爸的演讲</p>
            </div>
            <div class="card-footer">
              <a href="#" class="link">
                <i class="f7-icons size-13">heart_fill</i>428 赞
              </a>
              <a href="#" class="link" id="change">教师：张晓飞</a>
            </div>
          </div> -->
        </div>
      </div>
    </div>
    <!-- Statusbar overlay -->
    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main">
      <!-- Initial Page, "data-name" contains page name -->
      <!-- 头部标题栏 -->
      <div class="navbar">
        <div class="navbar-inner">
          <div class="left">
            <a href="#" class="item-link icon" id="back">
              <i class="icon f7-icons" style="font-size: 25px">chevron_left</i>
            </a>
          </div>
          <div class="title">
            <span id="title">可以失去一切，不能失去理想</span>
            <div class="stitle">
              <span id="count"></span>
              <i class="icon f7-icons more">right</i>
            </div>
          </div>

          <div class="right">

          </div>
        </div>
      </div>

      <!-- 工具栏 -->
      <div class="toolbar tabbar-labels">
        <div class="toolbar-inner">
          <!-- 工具栏标签 -->
          <a href="#" class="tab-link an-button popup-open" data-popup=".popup0" id="button0">
            <!-- Different icons for iOS and MD themes -->
            <i class="icon f7-icons ios-only">chat_fill</i>
            <span class="tabbar-label">背景高亮</span>
          </a>
          <a href="#" class="tab-link an-button popup-open" data-popup=".popup1" id="button1">
            <i class="icon f7-icons ios-only">help_fill</i>
            <span class="tabbar-label">文字高亮</span>
          </a>
          <a href="#" class="tab-link an-button popup-open" data-popup=".popup2" id="button2">
            <i class="icon f7-icons ios-only">heart_fill</i>
            <span class="tabbar-label">加粗</span>
          </a>
          <a href="#" class="tab-link an-button popup-open" data-popup=".popup3" id="button3">
            <i class="icon f7-icons ios-only">mic_fill</i>
            <span class="tabbar-label">下划线</span>
          </a>
          <!-- <a href="#" class="tab-link an-button popup-open" data-popup=".popup4" id="button4">
            <i class="icon f7-icons ios-only">compose_fill</i>
            <span class="tabbar-label">补充</span>
          </a> -->


          <a href="#" class="tab-link an-button panel-open" data-panel="right" id="button5">
            <i class="icon f7-icons ios-only">forward_fill
              <span class="badge color-red" id="allantate">0</span>
            </i>
            <span class="tabbar-label">所有批注</span>
          </a>
        </div>
      </div>
      <!-- 内容区域 -->
      <div class="page-content">
        <div class="list media-list annotator">
          <ul>
            <li>
              <a href="#" class="item-link item-content class">
                <div class="item-media">
                  <img src="images/teacher.jpg" width="44" />
                </div>
                <div class="item-inner">
                  <div class="item-title">
                    <div class="item-title size-14" id="person">发布人：张晓飞老师</div>
                  </div>
                  <div class="item-subtitle size-14">教育工作者</div>
                </div>
              </a>
            </li>
          </ul>
        </div>
        <div id="txblock">
          <div class="block" id="box" style="color:black"></div>
        </div>
      </div>
      <!-- 弹出页面 -->
      <div class="popup popup5 annotator">
        <div class="block annotator">
          <p>
            <i class="icon f7-icons ios-only">help_fill</i> 修改批注</p>
          <blockquote class="blockquote bqcolor1" id="bqcolor">
            <p id="old"></p>
            <p id="sendID" style="display: none"></p>
          </blockquote>
          <p class="content">
            <i class="icon f7-icons ios-only">bookmark_fill</i> 批注内容</p>
          <!-- Close Popup -->
          <div class="item-media">
            <i class="icon demo-list-icon"></i>
          </div>
          <textarea placeholder="请输入批注" id="mod" cols="45" rows="6" class="textarea"></textarea>
          <p class="row">
            <button class="col-30 button button-fill panel-open popup-close" id="modadd">修改批注</button>
            <button class="button col-30  popup-close">取消</button>
          </p>
        </div>
      </div>


      <div class="popup popup0 annotator">
        <div class="block annotator">
          <p>
            <i class="icon f7-icons ios-only">chat_fill</i> 添加批注</p>
          <blockquote class="blockquote bqcolor0">
            <p id="selectedtxt0" class="text_overflow3"></p>
          </blockquote>
          <p class="content">
            <i class="icon f7-icons ios-only">bookmark_fill</i> 批注内容</p>
          <!-- Close Popup -->
          <div class="item-media">
            <i class="icon demo-list-icon"></i>
          </div>
          <textarea placeholder="请输入批注" id="note0" cols="45" rows="6" class="textarea"></textarea>
          <p class="row">
            <button class="col-30 button button-fill panel-open popup-close" id="add0">添加批注</button>
            <button class="button col-30  popup-close" onclick="getPassage()">取消</button>
          </p>
        </div>
      </div>

      <div class="popup popup1 annotator">
        <div class="block annotator">
          <p>
            <i class="icon f7-icons ios-only">help_fill</i> 添加批注</p>
          <blockquote class="blockquote bqcolor1">
            <p id="selectedtxt1" class="text_overflow3"></p>
          </blockquote>
          <p class="content">
            <i class="icon f7-icons ios-only">bookmark_fill</i> 批注内容</p>
          <!-- Close Popup -->
          <div class="item-media">
            <i class="icon demo-list-icon"></i>
          </div>
          <textarea placeholder="请输入批注" id="note1" cols="45" rows="6" class="textarea"></textarea>
          <p class="row">
            <button class="col-30 button button-fill panel-open popup-close" id="add1">添加批注</button>
            <button class="button col-30  popup-close" onclick="getPassage()">取消</button>
          </p>
        </div>
      </div>

      <div class="popup popup2 annotator">
        <div class="block annotator">
          <p>
            <i class="icon f7-icons ios-only">heart_fill</i> 添加批注</p>
          <blockquote class="blockquote bqcolor2">
            <p id="selectedtxt2" class="text_overflow3"></p>
          </blockquote>
          <p class="content">
            <i class="icon f7-icons ios-only">bookmark_fill</i> 批注内容</p>
          <!-- Close Popup -->
          <div class="item-media">
            <i class="icon demo-list-icon"></i>
          </div>
          <textarea placeholder="请输入批注" id="note2" cols="45" rows="6" class="textarea"></textarea>
          <p class="row">
            <button class="col-30 button button-fill panel-open popup-close" id="add2">添加批注</button>
            <button class="button col-30  popup-close" onclick="getPassage()">取消</button>
          </p>
        </div>
      </div>

      <div class="popup popup3 annotator">
        <div class="block annotator">
          <p>
            <i class="icon f7-icons ios-only">mic_fill</i> 添加批注</p>
          <blockquote class="blockquote bqcolor3">
            <p id="selectedtxt3" class="text_overflow3"></p>
          </blockquote>
          <p class="content">
            <i class="icon f7-icons ios-only">bookmark_fill</i> 批注内容</p>
          <!-- Close Popup -->
          <div class="item-media">
            <i class="icon demo-list-icon"></i>
          </div>
          <textarea placeholder="请输入批注" id="note3" cols="45" rows="6" class="textarea"></textarea>
          <p class="row">
            <button class="col-30 button button-fill panel-open popup-close" id="add3">添加批注</button>
            <button class="button col-30  popup-close" onclick="getPassage()">取消</button>
          </p>
        </div>
      </div>

      <div class="popup popup4 annotator">
        <div class="block annotator">
          <p>
            <i class="icon f7-icons ios-only">compose_fill</i> 添加批注</p>
          <blockquote class="blockquote bqcolor4">
            <p id="selectedtxt4" class="text_overflow3"></p>
          </blockquote>
          <p class="content">
            <i class="icon f7-icons ios-only">bookmark_fill</i> 批注内容</p>
          <!-- Close Popup -->
          <div class="item-media">
            <i class="icon demo-list-icon"></i>
          </div>
          <textarea placeholder="请输入批注" id="note4" cols="45" rows="6" class="textarea"></textarea>
          <p class="row">
            <button class="col-30 button button-fill panel-open popup-close" id="add4">添加批注</button>
            <button class="button col-30  popup-close" onclick="getPassage()">取消</button>
          </p>
        </div>
      </div>
    </div>
  </div>

  <script src="js/framework7.min.js"></script>
  <script src="js/app.js"></script>
  <script src="js/rangy-core.js"></script>
  <script src="js/rangy-classapplier.js"></script>
  <script src="js/jquery.min.js"></script>
  <script>
    // 返回按钮
    var back = document.getElementById("back");
    if (back) {
      back.addEventListener('touchstart', function () {
        window.history.back(-1);
      })
    };

    var user;//用于未登入时点击批注弹出登入提示框
    $.ajax({
      url: 'http://192.168.1.193/EAnnotation/getCurrentUser',
      type: 'post',
      dataType: 'jsonp',
      xhrFields: {
        withCredentials: true
      },
      crossDomain: true,
      success: function (data) {
        if (data == 0) {
          user = 0;
          $(".texbg").html("未登录")
        } else {
          user = 1;
        }
      },
      error: function () {}
    })

    function goload() {
      app.dialog.create({
        text: '请先登录',
        buttons: [{
            text: '确定',
            onClick:function () {
              window.location.href = "person.html";
            }
          },    
        ],
        verticalButtons: true,
      }).open();
    }
  </script>
  <script src="js/annotate.js"></script>  
</body>

</html>