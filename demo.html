<!DOCTYPE html>
<html>

  <head>
    <!-- Required meta tags-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Color theme for statusbar -->
    <meta name="theme-color" content="#000">
    <!-- Your app title -->
    <title>Demo</title>
    <!-- Path to Framework7 Library CSS -->
    <link rel="stylesheet" href="css/framework7.css">
    <link rel="stylesheet" href="css/framework7-icons.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
      .Bton0Backgrond {
        color: white;
      }
    </style>
  </head>

  <body>
  <body>
    <!-- app root -->
    <div id="app">
      <!-- view inside of panel -->
      <div class="panel panel-left panel-cover">
        <div class="view panel-view"> ... </div>
      </div>
      <!-- Your main view -->
      <div class="view view-main">
        <!-- View related pages -->
        <a href="/about.html/">about</a>
      </div>
      <div class="popup">
        <div class="view popup-view"> ... </div>
      </div>
    </div>
  </body>
    <!-- Path to Framework7 Library JS-->
    <script src="js/framework7.js"></script>
    <!-- Path to your app js-->
    <script src="js/app.js"></script>
    <script src="js/rangy-core.js"></script>
    <script src="js/rangy-classapplier.js"></script>
    <script>
      function toggleBton0Backgrond() {
        Bton0BackgrondApplier.toggleSelection();
      }

      function selection() {
        var userSelection;
        if (window.getSelection) { //现代浏览器
          userSelection = window.getSelection();
        }
        var getRangeObject = function (selectionObject) {
          if (selectionObject.getRangeAt)
            return selectionObject.getRangeAt(0);
          else { // 较老版本Safari!
            var range = document.createRange();
            range.setStart(selectionObject.anchorNode, selectionObject.anchorOffset);
            range.setEnd(selectionObject.focusNode, selectionObject.focusOffset);
            return range;
          }
        }
        var rangeObject = getRangeObject(userSelection);
        var p = rangeObject.startContainer.parentNode;
        var i = 0;
        while (p = p.previousSibling) {
          i++;
        }
        i = (i + 1) / 2;
        alert(i);
        alert(rangeObject.startOffset);
        alert(rangeObject.endOffset);
        alert(rangy.getSelection().toString());
        
        cssApplier = rangy.createClassApplier("Bton0Backgrond", false);
        cssApplier.toggleSelection();
      }

      function annotate(n, s, e) {
        var px = $$(".block p")[n-1].firstChild;
        console.log(px);
        var range = rangy.createRange();
        range.setStart(px, s);
        range.setEnd(px, e);
        range.select();
        cssApplier = rangy.createClassApplier("Bton0Backgrond", );
        cssApplier.toggleSelection();
        // window.getSelection().removeAllRanges();
      }

      $$('#button0').on('click', function () {
        selection();
      });

      $$('#button1').on('click', function () {
        annotate(1, 5, 7);
        annotate(1, 1, 2);
        
      });
    </script>
  </body>

</html>

<div class="content-block inset anblock">
  <div class="content-block-inner">
    <blockquote class="blockquote">
      <p>阿里</p>
    </blockquote>
    <p></p>
  </div>
  <div class="card-footer">
    <a href="#" class="link">修改</a>
    <a href="#" class="link">删除</a>
  </div>
</div>